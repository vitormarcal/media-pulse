spring:
  servlet:
    multipart:
      max-file-size: ${SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE:15MB}
      max-request-size: ${SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE:15MB}
  web:
    resources:
      static-locations:
        - file:${media-pulse.storage.covers-path}
  mvc:
    static-path-pattern: /covers/**
  codec:
    max-in-memory-size: 200MB
  datasource:
    url: ${SPRING_DATASOURCE_URL}
    username: ${SPRING_DATASOURCE_USERNAME}
    password: ${SPRING_DATASOURCE_PASSWORD}
    driver-class-name: org.postgresql.Driver
  jpa:
    hibernate:
      ddl-auto: ${SPRING_JPA_HIBERNATE_DDL_AUTO:validate}
  flyway:
    enabled: true
    locations: classpath:db/migration

media-pulse:
  http:
    remote:
      max-connections: 100
      pending-acquire-timeout-ms: 30000
      connect-timeout-ms: 10000
      response-timeout-ms: 25000
      read-timeout-ms: 25000
      write-timeout-ms: 25000
      max-idle-time-ms: 60000
      max-life-time-ms: 300000
    local:
      max-connections: 20
      pending-acquire-timeout-ms: 5000
      connect-timeout-ms: 2000
      response-timeout-ms: 12000
      read-timeout-ms: 12000
      write-timeout-ms: 12000
      max-idle-time-ms: 60000
      max-life-time-ms: 300000
    images:
      max-connections: 20
      pending-acquire-timeout-ms: 10000
      connect-timeout-ms: 3000
      response-timeout-ms: 15000
      read-timeout-ms: 15000
      write-timeout-ms: 15000
      max-idle-time-ms: 60000
      max-life-time-ms: 300000
  pipeline:
    enabled: ${PIPELINE_IMPORT_ENABLED:true}
    schedule-cron: ${PIPELINE_IMPORT_CRON:0 0 4 * * *}
    run-on-startup: ${PIPELINE_RUN_ON_STARTUP:true}
  plex:
    base-url: ${PLEX_URL:http://plex:32400}
    token: ${PLEX_TOKEN}
    import:
      enabled: ${PLEX_IMPORT_ENABLED:true}
      page-size: ${PLEX_IMPORT_PAGE_SIZE:200}
  musicbrainz:
    enabled: ${MB_IMPORT_ENABLED:true}
    user-agent: "media-pulse/1.0"
    enrich:
      batch-size: ${MB_ENRICH_BATCH_SIZE:200}
      max-tags: ${MB_ENRICH_MAX_TAGS:30}
      min-request-interval-ms: ${MB_ENRICH_MIN_REQUEST_INTERVAL_MS:1200}
  spotify:
    enabled: ${SPOTIFY_ENABLED:true}
    api-base-url: ${SPOTIFY_API_BASE_URL:https://api.spotify.com/v1}
    accounts-base-url: ${SPOTIFY_ACCOUNTS_BASE_URL:https://accounts.spotify.com}
    client-id: ${SPOTIFY_CLIENT_ID:}
    client-secret: ${SPOTIFY_CLIENT_SECRET:}
    refresh-token: ${SPOTIFY_REFRESH_TOKEN:}
    oauth:
      enabled: ${SPOTIFY_OAUTH_ENABLED:false}
      redirect-uri: ${SPOTIFY_REDIRECT_URI:http://localhost:8080/oauth/spotify/callback}
      scopes: ${SPOTIFY_SCOPES:user-read-recently-played}
    import:
      enabled: ${SPOTIFY_IMPORT_ENABLED:true}
      page-size: ${SPOTIFY_IMPORT_PAGE_SIZE:50}
    poll:
      enabled: ${SPOTIFY_POLL_ENABLED:true}
      cron: ${SPOTIFY_POLL_CRON:0 */10 * * * *}
  storage:
    covers-path: "/data/covers"
    imports-path: "/data/imports"
  allowed-origin:
    - http://localhost:8080

